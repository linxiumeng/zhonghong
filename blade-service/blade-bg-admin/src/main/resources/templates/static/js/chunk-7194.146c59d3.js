(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-7194"],{"147Z":function(t,e,i){},"3blx":function(t,e,i){"use strict";i.r(e);var n=i("fBUP"),a=i("uJMD"),o={props:{detail:{type:Object,default:function(){return{}}}},data:function(){return{editProductForm:{},editProductRules:{name:[{required:!0,trigger:"blur",validator:function(t,e,i){e?i():i(new Error("请输入类型名称"))}}]},btnLoading:!1}},created:function(){this.editProductForm=a.a.deepClone(this.detail)},methods:{handleEditProduct:function(){var t=this;this.$refs.editProductForm.validate(function(e){if(!e)return!1;t.btnLoading=!0;var i=t.editProductForm.id?n.a.systemManage.changeGoodsType:n.a.systemManage.addGoodsType,a=t.editProductForm.id?{id:t.editProductForm.id,name:t.editProductForm.name}:{name:t.editProductForm.name,isOpen:1};t.$http.post(i,a).then(function(e){t.btnLoading=!1,t.$message({type:"success",message:"操作成功!"}),t.$emit("closeLayer")}).catch(function(){t.btnLoading=!1})})}}},s=(i("LlSr"),i("KHd+")),r=Object(s.a)(o,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"edit-product-type"},[i("el-form",{ref:"editProductForm",staticClass:"edit-product-type-form",attrs:{model:t.editProductForm,rules:t.editProductRules,"auto-complete":"off","label-position":"right","label-width":"160px"}},[t.editProductForm.id?i("el-form-item",{attrs:{label:"编号"}},[i("span",[t._v(t._s(t.editProductForm.id))])]):t._e(),t._v(" "),i("el-form-item",{attrs:{prop:"name",label:"类型名称"}},[i("el-input",{attrs:{name:"name",type:"text","auto-complete":"off",maxlength:"15",placeholder:"请输入产品类型名称"},model:{value:t.editProductForm.name,callback:function(e){t.$set(t.editProductForm,"name",e)},expression:"editProductForm.name"}})],1),t._v(" "),i("el-button",{staticClass:"editProductBtn",attrs:{loading:t.btnLoading,type:"primary"},nativeOn:{click:function(e){return e.preventDefault(),t.handleEditProduct(e)}}},[t._v("\n      提交\n    ")])],1)],1)},[],!1,null,"0e89c002",null);r.options.__file="editProductType.vue";var c={components:{editProductType:r.exports},data:function(){return{dataList:[],detailData:{},typeLayerTitle:"",tableLoading:!1,productTypeVisible:!1,typeTable:["已停用","已启用"]}},created:function(){this.getList()},methods:{getList:function(){var t=this;this.tableLoading=!0,this.$http.post(n.a.systemManage.getGoodsTypeList,{}).then(function(e){t.tableLoading=!1,e.result.map(function(e){return e.isOpenText=t.typeTable[e.isOpen],e}),t.dataList=e.result}).catch(function(){t.tableLoading=!1})},edit:function(t,e){this.detailData=this.dataList[t],this.typeLayerTitle="编辑产品",this.productTypeVisible=!0},changeStatus:function(t,e){var i=this,a=0===e.isOpen?1:0;this.$confirm("确定要停用产品类型 "+e.name+" 吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){i.$http.post(n.a.systemManage.changeGoodsType,{id:e.id,isOpen:a}).then(function(e){i.dataList[t].isOpen=a,i.dataList[t].isOpenText=i.typeTable[a],i.$message({type:"success",message:"操作成功!"})})})},deleteIt:function(t,e){var i=this;this.$confirm("确定要删除产品类型 "+e.name+" 吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){i.$http.post(n.a.systemManage.deleteGoodsType,[e.id]).then(function(t){i.getList(),i.$message({type:"success",message:"删除成功!"})})})},addProduct:function(){this.detailData={},this.typeLayerTitle="添加产品",this.productTypeVisible=!0},closeDetail:function(){this.getList(),this.productTypeVisible=!1}}},l=(i("BHMR"),Object(s.a)(c,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"product-type-container flex-table"},[i("el-form",{staticClass:"form-inline",attrs:{inline:!0,size:"mini"}},[t.btnPermission[397]?i("el-form-item",{staticClass:"fr"},[i("el-button",{attrs:{type:"primary"},on:{click:t.addProduct}},[t._v("添加产品类型")])],1):t._e()],1),t._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],staticClass:"table-flex-item",attrs:{data:t.dataList,stripe:!0,height:"100px","header-align":"center"}},[i("el-table-column",{attrs:{prop:"id",label:"编号",width:"120",align:"center"}}),t._v(" "),i("el-table-column",{attrs:{prop:"name",label:"类型名称",width:"150",align:"center"}}),t._v(" "),i("el-table-column",{attrs:{prop:"createDate",label:"添加时间",width:"100",align:"center"}}),t._v(" "),i("el-table-column",{attrs:{prop:"isOpenText",label:"状态",width:"180",align:"center"}}),t._v(" "),t.btnPermission[398]||t.btnPermission[399]||t.btnPermission[400]?i("el-table-column",{attrs:{label:"操作",align:"center",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.btnPermission[398]?i("span",{staticClass:"operate-btn",on:{click:function(i){t.edit(e.$index,e.row)}}},[t._v("\n          编辑\n        ")]):t._e(),t._v(" "),t.btnPermission[400]?i("span",{staticClass:"operate-btn",on:{click:function(i){t.changeStatus(e.$index,e.row)}}},[t._v("\n          "+t._s(0===e.row.isOpen?"启用":"停用")+"\n        ")]):t._e(),t._v(" "),t.btnPermission[399]?i("span",{staticClass:"operate-btn",on:{click:function(i){t.deleteIt(e.$index,e.row)}}},[t._v("\n          删除\n        ")]):t._e()]}}])}):t._e()],1),t._v(" "),i("el-dialog",{attrs:{visible:t.productTypeVisible,title:t.typeLayerTitle,width:"500px",center:""},on:{"update:visible":function(e){t.productTypeVisible=e}}},[t.productTypeVisible?i("editProductType",{attrs:{detail:t.detailData},on:{closeLayer:t.closeDetail}}):t._e()],1)],1)},[],!1,null,"7b8c78ec",null));l.options.__file="productType.vue";e.default=l.exports},BHMR:function(t,e,i){"use strict";var n=i("IPqq");i.n(n).a},IPqq:function(t,e,i){},LlSr:function(t,e,i){"use strict";var n=i("147Z");i.n(n).a}}]);