(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-352d"],{CfIx:function(e,t,i){"use strict";var s=i("CyzK");i.n(s).a},CyzK:function(e,t,i){var s=i("ikxo");"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);(0,i("SZ7m").default)("1d962357",s,!0,{})},Z3o0:function(e,t,i){"use strict";i.r(t);var s=i("m1cH"),n=i.n(s),r=i("gDS+"),a=i.n(r),o=i("fBUP"),l={data:function(){return{rowData:{},defaultChecked:[],permissionTree:[],permissionObj:{},defaultProps:{children:"children",label:"label"}}},created:function(){var e=this.$route.params.row;if(e)this.rowData=this.$route.params.row,localStorage.permissionData=a()(e);else{if(!localStorage.permissionData)return void this.$message({message:"无法找到参数，请关闭该标签重试",type:"error"});this.rowData=JSON.parse(localStorage.permissionData)}this.getMenuList()},destroyed:function(){this.$store.dispatch("delView",{path:"/systemManage/editRolesPermission",name:"editRolesPermission"}),localStorage.permissionData=null},methods:{getMenuList:function(){var e=this;this.$http.post(o.a.systemManage.getMenuList,{roleId:this.rowData.roleId}).then(function(t){e.permissionTree=e.switchTree(t.result);var i=t.roleMenuIdList.filter(function(t){if(!e.permissionObj[t]||!e.permissionObj[t].hasChildren)return t});t.roleMenuIdList.includes(0)?e.defaultChecked=i:e.defaultChecked=[0].concat(n()(i))})},submit:function(){var e=this;this.$http.post(o.a.systemManage.editRoles,{roleId:this.rowData.roleId,roleName:this.rowData.roleName,menuIdList:[].concat(n()(this.$refs.premissionTree.getHalfCheckedKeys()),n()(this.$refs.premissionTree.getCheckedKeys()))}).then(function(t){e.$message({message:"操作成功",type:"success"})})},returnToPrev:function(){this.$router.push("/systemManage/rolesManage")},switchTree:function(e){var t=this,i=[],s={};return e.forEach(function(e,t){-1===e.parentId&&(i.push({id:e.menuId,label:e.name,disabled:!e.menuId}),s["s1"+e.menuId]=i.length-1)}),e.forEach(function(e,n){var r=s["s1"+e.parentId];r&&(t.permissionObj[e.parentId]={hasChildren:!0},i[r].children||(i[r].children=[]),i[r].children.push({id:e.menuId,label:e.name}),s["s2"+e.menuId]=r+"-"+(i[r].children.length-1))}),e.forEach(function(e,n){var r=s["s2"+e.parentId];if(r){t.permissionObj[e.parentId]={hasChildren:!0};var a=r.split("-")[0],o=r.split("-")[1];i[a].children[o].children||(i[a].children[o].children=[]),i[a].children[o].children.push({id:e.menuId,label:e.name})}}),i}}},c=(i("CfIx"),i("KHd+")),d=Object(c.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"edit-roles-permission-container"},[i("div",{staticClass:"top-info"},[i("h3",{staticClass:"roles-name"},[e._v("角色名称: "+e._s(e.rowData.roleName))]),e._v(" "),i("el-button",{staticClass:"fr",attrs:{type:"primary",size:"mini"},on:{click:e.returnToPrev}},[e._v("返回")])],1),e._v(" "),i("div",{staticClass:"permission-tree"},[i("p",{staticClass:"tree-tips"},[e._v("请勾选权限")]),e._v(" "),i("el-tree",{ref:"premissionTree",attrs:{data:e.permissionTree,"default-checked-keys":e.defaultChecked,props:e.defaultProps,"empty-text":"数据加载中","show-checkbox":"","node-key":"id"}})],1),e._v(" "),i("el-button",{staticClass:"permission-btn",attrs:{type:"primary",size:"mini"},on:{click:e.submit}},[e._v("提交")])],1)},[],!1,null,"c1c7648a",null);d.options.__file="editRolesPermission.vue";t.default=d.exports},"gDS+":function(e,t,i){e.exports={default:i("oh+g"),__esModule:!0}},ikxo:function(e,t,i){(e.exports=i("I1BE")(!1)).push([e.i,".edit-roles-permission-container[data-v-c1c7648a] {\n  width: 800px;\n  background: #fff;\n  margin: 30px;\n  padding: 30px;\n}\n.edit-roles-permission-container .top-info[data-v-c1c7648a] {\n  padding-bottom: 20px;\n  border-bottom: 1px solid #D9DEE0;\n}\n.edit-roles-permission-container .top-info .roles-name[data-v-c1c7648a] {\n  display: inline-block;\n}\n.edit-roles-permission-container .permission-tree .tree-tips[data-v-c1c7648a] {\n  line-height: 40px;\n}\n.edit-roles-permission-container .permission-btn[data-v-c1c7648a] {\n  margin-top: 40px;\n  margin-left: 40px;\n}\n",""])},"oh+g":function(e,t,i){var s=i("WEpk"),n=s.JSON||(s.JSON={stringify:JSON.stringify});e.exports=function(e){return n.stringify.apply(n,arguments)}}}]);