(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-5d1b"],{"+vE/":function(e,t,a){"use strict";a.r(t);var i=a("fBUP"),n=a("uJMD"),s={props:{detail:{type:Object,default:function(){return{}}}},data:function(){return{editRolesForm:{},editRolesRules:{roleName:[{required:!0,trigger:"blur",validator:function(e,t,a){t?a():a(new Error("请输入角色名称"))}}]},btnLoading:!1}},created:function(){this.editRolesForm=n.a.deepClone(this.detail)},methods:{handleSubmit:function(){var e=this;this.$refs.editRolesForm.validate(function(t){if(!t)return!1;e.btnLoading=!0;var a=e.editRolesForm.roleId?i.a.systemManage.editRoles:i.a.systemManage.addRoles,n=e.editRolesForm.roleId?{roleId:e.editRolesForm.roleId,roleName:e.editRolesForm.roleName,menuIdList:e.editRolesForm.menuIdList}:{roleName:e.editRolesForm.roleName,menuIdList:[]};e.$http.post(a,n).then(function(t){e.btnLoading=!1,e.$message({message:"操作成功",type:"success"}),e.$emit("closeLayer")}).catch(function(){e.btnLoading=!1})})}}},o=(a("oVK3"),a("KHd+")),l=Object(o.a)(s,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"edit-roles-type"},[a("el-form",{ref:"editRolesForm",staticClass:"edit-roles-type-form",attrs:{model:e.editRolesForm,rules:e.editRolesRules,"auto-complete":"off","label-position":"right","label-width":"160px"}},[e.editRolesForm.roleId?a("el-form-item",{attrs:{label:"编号"}},[a("span",[e._v(e._s(e.editRolesForm.roleId))])]):e._e(),e._v(" "),a("el-form-item",{attrs:{prop:"roleName",label:"角色名称"}},[a("el-input",{attrs:{name:"roleName",type:"text","auto-complete":"off",maxlength:"15",placeholder:"请输入角色名称"},model:{value:e.editRolesForm.roleName,callback:function(t){e.$set(e.editRolesForm,"roleName",t)},expression:"editRolesForm.roleName"}})],1),e._v(" "),a("el-button",{staticClass:"editRolesBtn",attrs:{loading:e.btnLoading,type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.handleSubmit(t)}}},[e._v("\n      提交\n    ")])],1)],1)},[],!1,null,"69cf94c0",null);l.options.__file="editRolesManage.vue";var r={components:{editRolesManage:l.exports},data:function(){return{dataList:[],detailData:{},tableLoading:!1,rolesManageTitle:"",page:{currentPage:1,size:10,total:100},rolesManageVisible:!1}},created:function(){this.getList()},methods:{getList:function(){var e=this;this.tableLoading=!0,this.$http.post(i.a.systemManage.getRolesList,{page:this.page.currentPage,size:this.page.size}).then(function(t){e.tableLoading=!1,e.dataList=t.page.records,e.page={currentPage:t.page.current,size:t.page.size,total:t.page.total}}).catch(function(){e.tableLoading=!1})},edit:function(e,t){this.detailData=this.dataList[e],this.rolesManageTitle="编辑角色",this.rolesManageVisible=!0},addRoles:function(){this.detailData={},this.rolesManageTitle="添加角色",this.rolesManageVisible=!0},permission:function(e,t){this.$router.push({name:"editRolesPermission",params:{row:t}})},deleteItem:function(e,t){var a=this;this.$confirm("确定要删除账号 "+t.roleName+" 吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){a.$http.post(i.a.systemManage.deleteRoles,[t.roleId]).then(function(e){a.getList(),a.$message({message:"操作成功",type:"success"})})})},handleCurrentChange:function(e){this.page.currentPage=e,this.getList()},closeDetail:function(){this.getList(),this.rolesManageVisible=!1}}},c=(a("lGaM"),Object(o.a)(r,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"roles-manage-container flex-table"},[a("el-form",{staticClass:"form-inline",attrs:{inline:!0,size:"mini"}},[e.btnPermission[20]?a("el-form-item",{staticClass:"fr"},[a("el-button",{attrs:{type:"primary"},on:{click:e.addRoles}},[e._v("添加角色")])],1):e._e()],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticClass:"table-flex-item",attrs:{data:e.dataList,stripe:!0,height:"100px","header-align":"center"}},[a("el-table-column",{attrs:{prop:"roleId",label:"编号",width:"120",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"roleName",label:"角色名称",width:"150",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"添加时间",width:"100",align:"center"}}),e._v(" "),e.btnPermission[21]||e.btnPermission[22]||e.btnPermission[412]?a("el-table-column",{attrs:{label:"操作",align:"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.btnPermission[21]?a("span",{staticClass:"operate-btn",on:{click:function(a){e.edit(t.$index,t.row)}}},[e._v("\n          编辑\n        ")]):e._e(),e._v(" "),e.btnPermission[412]?a("span",{staticClass:"operate-btn",on:{click:function(a){e.permission(t.$index,t.row)}}},[e._v("\n          权限\n        ")]):e._e(),e._v(" "),e.btnPermission[22]?a("span",{staticClass:"operate-btn",on:{click:function(a){e.deleteItem(t.$index,t.row)}}},[e._v("\n          删除\n        ")]):e._e()]}}])}):e._e()],1),e._v(" "),a("div",{staticClass:"block pagination"},[a("el-pagination",{attrs:{"current-page":e.page.currentPage,"page-size":e.page.size,total:e.page.total,layout:"prev, pager, next, jumper"},on:{"update:currentPage":function(t){e.$set(e.page,"currentPage",t)},"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{visible:e.rolesManageVisible,title:e.rolesManageTitle,width:"500px",center:""},on:{"update:visible":function(t){e.rolesManageVisible=t}}},[e.rolesManageVisible?a("editRolesManage",{attrs:{detail:e.detailData},on:{closeLayer:e.closeDetail}}):e._e()],1)],1)},[],!1,null,"4cb70fc6",null));c.options.__file="rolesManage.vue";t.default=c.exports},TjSf:function(e,t,a){},lGaM:function(e,t,a){"use strict";var i=a("uFHr");a.n(i).a},oVK3:function(e,t,a){"use strict";var i=a("TjSf");a.n(i).a},uFHr:function(e,t,a){}}]);