(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-40e0"],{"+j+x":function(e,t,r){(e.exports=r("I1BE")(!1)).push([e.i,".delivery-order-container[data-v-4f92188b] {\n  height: calc(100% - 60px);\n  background: #fff;\n  margin: 30px;\n  width: 1100px;\n}\n.delivery-order-container .form-inline[data-v-4f92188b] {\n  padding: 20px 20px 0 20px;\n}\n.delivery-order-container .operate-btn[data-v-4f92188b] {\n  cursor: pointer;\n  text-decoration: underline;\n  color: #409EFF;\n}\n.delivery-order-container .pagination[data-v-4f92188b] {\n  text-align: center;\n  padding: 10px;\n}\n",""])},"/6a0":function(e,t,r){var a=r("dwZI");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,r("SZ7m").default)("47173303",a,!0,{})},"7tH6":function(e,t,r){"use strict";var a=r("/6a0");r.n(a).a},DOIn:function(e,t,r){"use strict";var a=r("pznk");r.n(a).a},YwUD:function(e,t,r){"use strict";r.r(t);var a=r("QbLZ"),i=r.n(a),n=r("fBUP"),l={data:function(){return{uploadDeliveryOrder:{orderNum:"",buyer:"",provider:""},deliveryOrderList:[],isOrderRight:!1,uploadImg:n.a.other.uploadFile,btnLoading:!1}},methods:{uploadSuccess:function(e){this.deliveryOrderList.push({url:e.url,name:e.url})},unploadError:function(){this.$message({message:"文件上传失败!",type:"warning"})},fileOverNum:function(){this.$message({message:"最多只允许上传一个文件!",type:"warning"})},removeFile:function(){this.deliveryOrderList=[]},findOrderMsg:function(){var e=this;this.uploadDeliveryOrder.orderNum&&this.$http.post(n.a.orderManage.ordrerDetail,{id:this.uploadDeliveryOrder.orderNum}).then(function(t){t.result?(e.uploadDeliveryOrder.buyer=t.result.buyerCompany||"——",e.uploadDeliveryOrder.provider=t.result.providerCompany||"——",e.isOrderRight=!0):(e.$message({message:"未查询到对应订单",type:"warn"}),e.isOrderRight=!1)}).catch(function(){e.isOrderRight=!1})},handleUploadDeliveryOrder:function(){var e=this;this.isOrderRight?this.deliveryOrderList.length?(this.btnLoading=!0,this.$http.post(n.a.orderManage.uploadLoadBill,{orderId:this.uploadDeliveryOrder.orderNum,path:this.deliveryOrderList[0].url}).then(function(t){e.btnLoading=!1,e.$message({message:"上传成功",type:"success"}),e.$emit("closeLayer")}).catch(function(){e.btnLoading=!1})):this.$message({message:"请上传提货单",type:"warn"}):this.$message({message:"请输入正确的订单号",type:"warn"})}}},o=(r("7tH6"),r("KHd+")),s=Object(o.a)(l,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"upload-delivery-order"},[r("el-form",{ref:"uploadDeliveryOrder",staticClass:"upload-delivery-order-form",attrs:{model:e.uploadDeliveryOrder,"auto-complete":"off","label-position":"right","label-width":"100px"}},[r("el-form-item",{attrs:{prop:"orderNum",label:"订单号"}},[r("el-input",{attrs:{name:"orderNum",type:"text","auto-complete":"off",maxlength:"9",placeholder:"请输入订单号"},on:{blur:e.findOrderMsg},model:{value:e.uploadDeliveryOrder.orderNum,callback:function(t){e.$set(e.uploadDeliveryOrder,"orderNum",t)},expression:"uploadDeliveryOrder.orderNum"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"采购商名称"}},[r("span",[e._v(e._s(e.uploadDeliveryOrder.buyer))])]),e._v(" "),r("el-form-item",{attrs:{label:"供应商名称"}},[r("span",[e._v(e._s(e.uploadDeliveryOrder.provider))])]),e._v(" "),r("el-upload",{staticClass:"upload-btn",attrs:{limit:1,action:e.uploadImg,"file-list":e.deliveryOrderList,"on-exceed":e.fileOverNum,"on-success":e.uploadSuccess,"on-error":e.unploadError,"before-remove":e.removeFile}},[r("el-button",{attrs:{size:"small"}},[e._v("点击上传提货单")])],1),e._v(" "),r("el-button",{staticClass:"uploadDeliveryOrderBtn",attrs:{loading:e.btnLoading,type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.handleUploadDeliveryOrder(t)}}},[e._v("\n      提交\n    ")])],1)],1)},[],!1,null,"da9316ec",null);s.options.__file="uploadDeliveryOrder.vue";var d={components:{uploadDeliveryOrder:s.exports},data:function(){return{searchForm:{date:"",keywords:""},dataList:[],tableLoading:!1,page:{currentPage:1,size:10,total:100},uploadDeliveryOrderVisible:!1}},created:function(){this.getList()},methods:{getList:function(){var e=this;this.tableLoading=!0,this.$http.post(n.a.orderManage.loadBillList,i()({page:this.page.currentPage,size:this.page.size,startDate:this.searchForm.date&&this.searchForm.date[0],endDate:this.searchForm.date&&this.searchForm.date[1]},this.searchForm)).then(function(t){e.tableLoading=!1,e.dataList=t.result.records,e.page={currentPage:t.result.current,size:t.result.size,total:t.result.total}}).catch(function(){e.tableLoading=!1})},showDetail:function(e,t){window.open(t.path)},deleteIt:function(e,t){var r=this;this.$confirm("是否确认删除该提货单","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){r.$http.post(n.a.orderManage.deleteLoadBill,[t.id]).then(function(e){r.getList(),r.$message({message:"操作成功",type:"success"})})})},uploadDeliveryOrder:function(e,t){this.uploadDeliveryOrderVisible=!0},toSearch:function(){this.page.currentPage=1,this.getList()},handleCurrentChange:function(e){this.page.currentPage=e,this.getList()},closeUploadDeliveryOrder:function(){this.getList(),this.uploadDeliveryOrderVisible=!1}}},u=(r("DOIn"),Object(o.a)(d,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"delivery-order-container flex-table"},[r("el-form",{staticClass:"form-inline",attrs:{inline:!0,model:e.searchForm,size:"mini"}},[r("el-form-item",{attrs:{label:"日期"}},[r("el-date-picker",{attrs:{"default-time":["00:00:00","23:59:59"],"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetimerange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.searchForm.date,callback:function(t){e.$set(e.searchForm,"date",t)},expression:"searchForm.date"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"其他"}},[r("el-input",{attrs:{placeholder:"输入账号、企业名称搜索"},model:{value:e.searchForm.keywords,callback:function(t){e.$set(e.searchForm,"keywords",t)},expression:"searchForm.keywords"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.toSearch}},[e._v("搜索")])],1),e._v(" "),e.btnPermission[389]?r("el-form-item",{staticClass:"fr"},[r("el-button",{attrs:{type:"primary"},on:{click:e.uploadDeliveryOrder}},[e._v("上传提货单")])],1):e._e()],1),e._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticClass:"table-flex-item",attrs:{data:e.dataList,stripe:!0,height:"100px","header-align":"center"}},[r("el-table-column",{attrs:{prop:"orderId",label:"订单号",width:"120",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"purchaseOrdersEntity.buyerPhone",label:"采购商账号",width:"140",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"purchaseOrdersEntity.buyerCompany",label:"采购商名称",width:"140",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"purchaseOrdersEntity.goodsId",label:"产品编号",width:"140",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"purchaseOrdersEntity.providerCompany",label:"供应商名称",width:"140",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"updateTime",label:"上传时间",width:"100",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{label:"提货单",align:"center",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",{staticClass:"operate-btn",on:{click:function(r){e.showDetail(t.$index,t.row)}}},[e._v("\n          "+e._s(t.row.path)+"\n        ")])]}}])}),e._v(" "),e.btnPermission[388]?r("el-table-column",{attrs:{label:"操作",align:"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.btnPermission[388]?r("span",{staticClass:"operate-btn",on:{click:function(r){e.deleteIt(t.$index,t.row)}}},[e._v("\n          删除\n        ")]):e._e()]}}])}):e._e()],1),e._v(" "),r("div",{staticClass:"block pagination"},[r("el-pagination",{attrs:{"current-page":e.page.currentPage,"page-size":e.page.size,total:e.page.total,layout:"prev, pager, next, jumper"},on:{"update:currentPage":function(t){e.$set(e.page,"currentPage",t)},"current-change":e.handleCurrentChange}})],1),e._v(" "),r("el-dialog",{attrs:{visible:e.uploadDeliveryOrderVisible,width:"500px",center:"",title:"上传提货单"},on:{"update:visible":function(t){e.uploadDeliveryOrderVisible=t}}},[e.uploadDeliveryOrderVisible?r("uploadDeliveryOrder",{on:{closeLayer:e.closeUploadDeliveryOrder}}):e._e()],1)],1)},[],!1,null,"4f92188b",null));u.options.__file="deliveryOrder.vue";t.default=u.exports},dwZI:function(e,t,r){(e.exports=r("I1BE")(!1)).push([e.i,".upload-delivery-order .uploadDeliveryOrderBtn[data-v-da9316ec] {\n  display: block;\n  width: 100px;\n  margin: 10px auto 0 auto;\n}\n",""])},pznk:function(e,t,r){var a=r("+j+x");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,r("SZ7m").default)("55d49243",a,!0,{})}}]);