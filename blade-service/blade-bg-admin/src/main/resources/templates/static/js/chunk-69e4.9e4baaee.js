(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-69e4"],{"+g6/":function(t,e,i){"use strict";i.r(e);var n=i("fBUP"),s={data:function(){return{imgList:[],uploadBanner:n.a.contentManage.uploadBanner}},created:function(){this.getBannerList()},mounted:function(){var t=this;this.$dragging.$on("dragend",function(){var e=[];t.imgList.map(function(t){e.push(t.id)}),t.$http.post(n.a.contentManage.bannerOrder,e).then(function(t){})})},methods:{getBannerList:function(){var t=this;this.$http.post(n.a.contentManage.getBannerList,{}).then(function(e){t.imgList=e.result})},beforeUpload:function(t){var e="image/jpeg"===t.type,i="image/gif"===t.type,n="image/png"===t.type,s=t.size/1024/1024<10;return e||i||n?s?this.imgList.length>=20?(this.$message({message:"已超过数量限制，最多可上传20张图片",type:"warning"}),!1):void 0:(this.$message({message:"上传图片大小不能超过 10MB!",type:"warning"}),!1):(this.$message({message:"上传图片必须是JPG/GIF/PNG格式!",type:"warning"}),!1)},uploadSuccess:function(t){this.imgList.push(t.result)},unploadError:function(){this.$message({message:"图片上传失败!",type:"warning"})},deleteImg:function(t,e){var i=this;this.$confirm("是否确认删除该图片?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){i.$http.post(n.a.contentManage.deleteBanner,[e]).then(function(e){i.$message({type:"success",message:"删除成功!"}),i.imgList.splice(t,1)})})},changeImgVisible:function(t,e){var i=this,s=this.imgList[t].isOpen;s=0===s?1:0,this.$http.post(n.a.contentManage.changeBanner,{id:e,isOpen:s}).then(function(e){i.imgList[t].isOpen=s})}}},a=(i("v4Gx"),i("KHd+")),o=Object(a.a)(s,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"banner-manage-container flex-table"},[i("div",{staticClass:"addNewImg"},[i("el-upload",{staticClass:"upload-img",attrs:{"before-upload":t.beforeUpload,"on-success":t.uploadSuccess,"on-error":t.unploadError,action:t.uploadBanner,"with-credentials":!0,"show-file-list":!1}},[t.btnPermission[407]?i("el-button",{attrs:{size:"small",type:"primary"}},[t._v("新增图片")]):t._e()],1)],1),t._v(" "),t.imgList.length?i("div",{staticClass:"img-list"},t._l(t.imgList,function(e,n){return i("div",{directives:[{name:"dragging",rawName:"v-dragging",value:{item:e,list:t.imgList,group:"imgList"},expression:"{ item: item, list: imgList, group: 'imgList' }"}],key:n,staticClass:"img-item"},[t.btnPermission[409]?i("i",{staticClass:"img-item-icon-delete el-icon-close",on:{click:function(i){t.deleteImg(n,e.id)}}}):t._e(),t._v(" "),t.btnPermission[410]?i("i",{staticClass:"img-item-icon-show iconfont",class:e.isOpen?"iconeye-open":"iconeye",attrs:{title:e.isOpen?"点击隐藏图片":"点击发布图片"},on:{click:function(i){t.changeImgVisible(n,e.id)}}}):t._e(),t._v(" "),i("img",{attrs:{src:e.path}})])})):i("div",{staticClass:"img-no-list"},[t._v("\n    暂无图片，请点击按钮新增图片\n  ")]),t._v(" "),t.imgList.length?i("p",{staticClass:"banner-tip"},[t._v("注：您可通过拖动修改图片顺序")]):t._e()])},[],!1,null,"1b3925dd",null);o.options.__file="bannerManage.vue";e.default=o.exports},JCuX:function(t,e,i){},v4Gx:function(t,e,i){"use strict";var n=i("JCuX");i.n(n).a}}]);