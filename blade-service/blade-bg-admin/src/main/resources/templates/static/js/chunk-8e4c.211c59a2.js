(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-8e4c"],{"2jG0":function(t,e,i){"use strict";var a=i("xden");i.n(a).a},Uism:function(t,e,i){"use strict";var a=i("gOoI");i.n(a).a},gOoI:function(t,e,i){},vikH:function(t,e,i){"use strict";var a=i("y9fY");i.n(a).a},vpYm:function(t,e,i){"use strict";i.r(e);var a=i("QbLZ"),r=i.n(a),n=i("fBUP"),s=i("uJMD"),l={props:{creditInfo:{type:Object,default:function(){return{}}}},data:function(){return{img:[{title:"借款申请表",key:"loanApplication",imgUrl:[]},{title:"近两年及当期财务报表",key:"financialStatement",imgUrl:[]},{title:"近期缴税证明",key:"taxCertification",imgUrl:[]},{title:"近期银行流水",key:"accountStatement",imgUrl:[]},{title:"近两年银行授信额度证明",key:"certificateOfCreditLine",imgUrl:[]},{title:"近两年原油贸易业务相关合同、票据及其他相关材料",key:"orther",imgUrl:[]}]}},created:function(){for(var t=0;t<this.img.length;t++){var e=this.creditInfo[this.img[t].key];e&&(this.img[t].imgUrl=JSON.parse(e))}}},c=(i("vikH"),i("KHd+")),o=Object(c.a)(l,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"commercial-tenant-credit-info-container"},t._l(t.img,function(e,a){return i("el-row",{key:a},[i("el-col",{attrs:{span:24}},[i("p",[t._v(t._s(e.title)+":")]),t._v(" "),e.imgUrl.length?i("div",t._l(e.imgUrl,function(t,e){return i("img",{key:e,staticClass:"commercial-tenant-img",attrs:{src:t}})})):i("p",[t._v("暂无数据")])])],1)}))},[],!1,null,"6650dd0a",null);o.options.__file="commercialTenantCreditInfo.vue";var d=o.exports,u=i("RO9D"),m={props:{id:{type:Number,default:-1},mobile:{type:String,default:"——"}},data:function(){var t=function(t,e,i){u.a.regPositiveFloat2.test(e)&&0!==parseFloat(e)?i():i(new Error("请输入大于0的数字，最多可保留两位小数"))};return{creditPassForm:{creditLevel:"",creditLimit:"",creditUnit:"",creditHigh:""},creditPassRules:{creditLevel:[{required:!0,trigger:"change",validator:function(t,e,i){""===e?i(new Error("请选择授信等级")):i()}}],creditLimit:[{required:!0,trigger:"blur",validator:t}],creditUnit:[{required:!0,trigger:"blur",validator:t}],creditHigh:[{required:!0,trigger:"blur",validator:t}]},submitLoading:!1}},methods:{handleCreditPass:function(){var t=this;this.$refs.creditPassForm.validate(function(e){if(!e)return!1;t.submitLoading=!0,t.$http.post(n.a.commercialTenant.changeCredit,r()({userId:t.id,creditStatus:3},t.creditPassForm)).then(function(e){t.submitLoading=!1,t.$message({message:"操作成功",type:"success"}),t.$emit("closeCreditPass")}).catch(function(){t.submitLoading=!1})})}}},p=(i("Uism"),Object(c.a)(m,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-credit-pass"},[i("el-form",{ref:"creditPassForm",staticClass:"credit-pass-form",attrs:{model:t.creditPassForm,rules:t.creditPassRules,"auto-complete":"off","label-position":"right","label-width":"160px"}},[i("el-form-item",{attrs:{label:"账号"}},[i("span",[t._v(t._s(t.mobile))])]),t._v(" "),i("el-form-item",{staticClass:"block",attrs:{prop:"creditLevel",label:"授信评级"}},[i("el-select",{staticClass:"block",attrs:{placeholder:"请选择"},model:{value:t.creditPassForm.creditLevel,callback:function(e){t.$set(t.creditPassForm,"creditLevel",e)},expression:"creditPassForm.creditLevel"}},[i("el-option",{attrs:{label:"A",value:"A"}}),t._v(" "),i("el-option",{attrs:{label:"B",value:"B"}}),t._v(" "),i("el-option",{attrs:{label:"C",value:"C"}})],1)],1),t._v(" "),i("el-form-item",{attrs:{prop:"creditLimit",label:"授信额度"}},[i("el-input",{attrs:{name:"creditLimit",type:"text","auto-complete":"off",maxlength:"15",placeholder:"请输入授信额度"},model:{value:t.creditPassForm.creditLimit,callback:function(e){t.$set(t.creditPassForm,"creditLimit",e)},expression:"creditPassForm.creditLimit"}},[i("i",{staticClass:"input-unit-rmb",attrs:{slot:"suffix"},slot:"suffix"},[t._v("元")])])],1),t._v(" "),i("el-form-item",{attrs:{prop:"creditUnit",label:"单笔最高可授信"}},[i("el-input",{attrs:{name:"creditUnit",type:"text","auto-complete":"off",maxlength:"15",placeholder:"请输入单笔最高可授信"},model:{value:t.creditPassForm.creditUnit,callback:function(e){t.$set(t.creditPassForm,"creditUnit",e)},expression:"creditPassForm.creditUnit"}},[i("i",{staticClass:"input-unit-rmb",attrs:{slot:"suffix"},slot:"suffix"},[t._v("元")])])],1),t._v(" "),i("el-form-item",{attrs:{prop:"creditHigh",label:"当前剩余融资额度"}},[i("el-input",{attrs:{name:"creditHigh",type:"text","auto-complete":"off",maxlength:"15",placeholder:"请再次当前剩余融资额度"},model:{value:t.creditPassForm.creditHigh,callback:function(e){t.$set(t.creditPassForm,"creditHigh",e)},expression:"creditPassForm.creditHigh"}},[i("i",{staticClass:"input-unit-rmb",attrs:{slot:"suffix"},slot:"suffix"},[t._v("元")])])],1),t._v(" "),i("el-button",{staticClass:"creditPassBtn",attrs:{loading:t.submitLoading,type:"primary"},nativeOn:{click:function(e){return e.preventDefault(),t.handleCreditPass(e)}}},[t._v("\n      提交\n    ")])],1)],1)},[],!1,null,"8ededc4a",null));p.options.__file="commercialTenantCreditPass.vue";var f={components:{commercialTenantCreditInfo:d,commercialTenantCreditPass:p.exports},data:function(){return{searchForm:{creditStatus:"",date:"",keywords:""},commercialTenantCredit:[],page:{currentPage:1,size:10,total:100},detailId:"",detailMobile:"",detailCreditInfo:{},creditInfoVisible:!1,creditInfoLoading:!1,creditStatusTable:["","等待授信","未通过","已授信"],creditPassVisible:!1,tableLoading:!1,creditLoading:!1}},created:function(){this.getList()},methods:{getList:function(){var t=this;this.tableLoading=!0,this.$http.post(n.a.commercialTenant.tenantCreditList,r()({page:this.page.currentPage,size:this.page.size,startDate:this.searchForm.date&&this.searchForm.date[0],endDate:this.searchForm.date&&this.searchForm.date[1]},this.searchForm)).then(function(e){e.result.records.map(function(e){return e.creditStatusText=t.creditStatusTable[e.creditStatus],e.accountEntity&&(e.accountEntity.creditUnit=s.a.numFormat(e.accountEntity.creditUnit),e.accountEntity.creditHigh=s.a.numFormat(e.accountEntity.creditHigh),e.accountEntity.creditLimit=s.a.numFormat(e.accountEntity.creditLimit)),e}),t.tableLoading=!1,t.commercialTenantCredit=e.result.records,t.page={currentPage:e.result.current,size:e.result.size,total:e.result.total}}).catch(function(){t.tableLoading=!1})},showInfo:function(t,e){this.detailId=e.userId,this.detailMobile=e.mobile,this.detailCreditInfo=e.creditEntity,this.creditInfoVisible=!0},toCredit:function(t,e){this.detailId=e.userId,this.detailMobile=e.mobile,this.creditPassVisible=!0},closeCreditPass:function(){this.getList(),this.closeCredit()},creditReject:function(){var t=this;this.creditLoading=!0,this.$http.post(n.a.commercialTenant.changeCredit,{userId:this.detailId,creditStatus:2}).then(function(e){t.creditLoading=!1,t.getList(),t.$message({message:"操作成功",type:"success"})}).catch(function(){t.creditLoading=!1}),this.closeCredit()},toSearch:function(){this.page.currentPage=1,this.getList()},handleCurrentChange:function(t){this.page.currentPage=t,this.getList()},closeCredit:function(){this.creditInfoVisible=!1,this.creditPassVisible=!1}}},g=(i("2jG0"),Object(c.a)(f,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"commercial-tenant-credit-container flex-table"},[i("el-form",{staticClass:"form-inline",attrs:{inline:!0,model:t.searchForm,size:"mini"}},[i("el-form-item",{attrs:{label:"授信状态"}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:t.searchForm.creditStatus,callback:function(e){t.$set(t.searchForm,"creditStatus",e)},expression:"searchForm.creditStatus"}},[i("el-option",{attrs:{label:"全部",value:""}}),t._v(" "),i("el-option",{attrs:{label:"等待授信",value:"1"}}),t._v(" "),i("el-option",{attrs:{label:"未通过",value:"2"}}),t._v(" "),i("el-option",{attrs:{label:"已授信",value:"3"}})],1)],1),t._v(" "),i("el-form-item",{attrs:{label:"授信时间"}},[i("el-date-picker",{attrs:{"default-time":["00:00:00","23:59:59"],"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetimerange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.searchForm.date,callback:function(e){t.$set(t.searchForm,"date",e)},expression:"searchForm.date"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"其他"}},[i("el-input",{attrs:{placeholder:"输入账号、企业名称搜索"},model:{value:t.searchForm.keywords,callback:function(e){t.$set(t.searchForm,"keywords",e)},expression:"searchForm.keywords"}})],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:t.toSearch}},[t._v("搜索")])],1)],1),t._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],staticClass:"table-flex-item",attrs:{data:t.commercialTenantCredit,stripe:!0,height:"100px","header-align":"center"}},[i("el-table-column",{attrs:{prop:"mobile",label:"账号",width:"120",align:"center"}}),t._v(" "),i("el-table-column",{attrs:{prop:"companyName",label:"企业名称",width:"120",align:"center"}}),t._v(" "),i("el-table-column",{attrs:{prop:"legalPerson",label:"企业法人",width:"100",align:"center"}}),t._v(" "),i("el-table-column",{attrs:{prop:"contacts",label:"联系人",width:"100",align:"center"}}),t._v(" "),i("el-table-column",{attrs:{prop:"contactNumber",label:"联系电话",width:"120",align:"center"}}),t._v(" "),i("el-table-column",{attrs:{prop:"creditEntity.createDate",label:"最近一次授信时间",width:"100",align:"center"}}),t._v(" "),i("el-table-column",{attrs:{prop:"accountEntity.creditLevel",label:"授信评级",width:"100",align:"center"}}),t._v(" "),i("el-table-column",{attrs:{prop:"accountEntity.creditLimit",label:"授信额度",width:"130",align:"center"}}),t._v(" "),i("el-table-column",{attrs:{prop:"accountEntity.creditUnit",label:"单笔最高可融资",width:"130",align:"center"}}),t._v(" "),i("el-table-column",{attrs:{prop:"accountEntity.creditHigh",label:"当前剩余融资额度",width:"140",align:"center"}}),t._v(" "),i("el-table-column",{attrs:{prop:"creditStatusText",label:"状态",width:"100",align:"center"}}),t._v(" "),t.btnPermission[377]||t.btnPermission[378]?i("el-table-column",{attrs:{label:"操作",align:"center",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.btnPermission[377]?i("p",{staticClass:"operate-btn",on:{click:function(i){t.showInfo(e.$index,e.row)}}},[t._v("\n          查看资料\n        ")]):t._e(),t._v(" "),t.btnPermission[378]?i("p",{staticClass:"operate-btn",on:{click:function(i){t.toCredit(e.$index,e.row)}}},[t._v("\n          "+t._s(1===e.row.creditStatus?"授信":"重新授信")+"\n        ")]):t._e()]}}])}):t._e()],1),t._v(" "),i("div",{staticClass:"block pagination"},[i("el-pagination",{attrs:{"current-page":t.page.currentPage,"page-size":t.page.size,total:t.page.total,layout:"prev, pager, next, jumper"},on:{"update:currentPage":function(e){t.$set(t.page,"currentPage",e)},"current-change":t.handleCurrentChange}})],1),t._v(" "),i("el-dialog",{attrs:{visible:t.creditInfoVisible,width:"1000px",center:"",title:"授信资料"},on:{"update:visible":function(e){t.creditInfoVisible=e}}},[t.creditInfoVisible?i("commercialTenantCreditInfo",{attrs:{"credit-info":t.detailCreditInfo}}):t._e(),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:t.closeCredit}},[t._v("关闭")]),t._v(" "),i("el-button",{attrs:{loading:t.creditLoading,type:"primary"},on:{click:t.creditReject}},[t._v("材料不合格，要求重新提交")])],1)],1),t._v(" "),t.creditPassVisible?i("el-dialog",{attrs:{visible:t.creditPassVisible,width:"500px",center:"",title:"授信"},on:{"update:visible":function(e){t.creditPassVisible=e}}},[i("commercialTenantCreditPass",{attrs:{mobile:t.detailMobile,id:t.detailId},on:{closeCreditPass:t.closeCreditPass}})],1):t._e()],1)},[],!1,null,"8084a18c",null));g.options.__file="commercialTenantCredit.vue";e.default=g.exports},xden:function(t,e,i){},y9fY:function(t,e,i){}}]);